/*! test 29-12-2014 */

!function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o=a("#notifications"),p=a('input[name="Name"]'),q=a('input[name="url"]');a.ajax({type:"GET",url:"../../data/notification.txt"}).done(function(a){console.log(a);var b="<p>"+a+"</p>";a.length?o.html(b):o.hide()}).fail(function(){o.hide()}),b=function(){var b=location.hash.slice(1),d=a(".tabs > div"),e=a(".tabs > ul > li > a").eq(0),f=a("#pre-fix-"+b);""===b&&(b=e.href.split("#")[1]),a.each(d,function(d,e){e=a(e),e.addClass("hidden"),c(b,d)}),f.removeClass("hidden")},c=function(b,c){var d=a(".tabs > ul > li > a");d[c].parentNode.id="",d[c].href.split("#")[1]===b&&(d[c].parentNode.id="active")},d=function(){return Modernizr.localstorage?!0:(console.error("Your browser does not support localStorage"),!1)},e=function(a){var b,c,d=a.currentTarget.parentNode,e=a.target;console.log(d,e.className,e),a.preventDefault(),"settings"===e.parentNode.className&&(c=d,f(c)),"expand"===e.parentNode.className&&(c=d,g(c)),"cancel"===e.className&&(c=d.parentNode,f(c)),"save"===e.className&&(b=d,h(b))},f=function(b){var c="#"+b.id,d=a(c+"> form");a(d).toggleClass("hidden")},g=function(a,b){var c=document.getElementById("iframe-"+a.id);return c?void window.open(c.src,"_blank"):void window.open(b.value,"_blank")},h=function(b){var c,d=-1,e=/http(s)?:\/\/w{0,3}.+\.\w{2,4}(.+)?/,f=0,g=[],h=[];a.each(p,function(i,k){a(k).parents("form")[0]===b&&(""!==p[i].value&&""===q[i].value&&(q[i].style.border="1px solid red",f=1),""===p[i].value&&""!==q[i].value&&(p[i].style.border="1px solid red",f=1),""!==p[i].value&&""!==q[i].value&&(p[i].style.border="none","http"!==q[i].value.substring(0,4)&&(q[i].value="http://"+q[i].value),e.test(q[i].value)?(q[i].style.border="none",j(p[i],d,b.parentNode),d=i,m(p[i],q[i],b.parentNode,c,g,h)):(q[i].style.border="1px solid red",f=1)))}),d>-1&&0===f&&i(q[d],b.parentNode)},i=function(b,c){var d=a(b).parents("form")[0],e=document.getElementById("iframe-"+c.id);null===e&&(e=document.createElement("iframe"),e.frameBorder=0,e.width="95%",e.height="100%",e.marginwidth="30%",e.id="iframe-"+c.id,a("#"+c.id).append(e)),e.setAttribute("src",b.value),a(d).addClass("hidden")},j=function(b,c,d){var e,f=document.getElementById("reportsList"+d.id);null===f&&(f=document.createElement("select"),f.id="reportsList"+d.id,a("#"+d.id).append(f),a(f).change(l)),-1===c&&a.each(f,function(){f.remove(e)}),e=document.createElement("option"),e.value=b.value,e.innerHTML=b.value,e.selected=!0,f.add(e,f[0])},m=function(a,b,c,e,f,g){d()&&(e={name:a.value,url:b.value},"pre-fix-quick-reports"===c.id&&f.unshift(e),"pre-fix-my-team-folders"===c.id&&g.unshift(e),n={reports:f,folders:g},localStorage.setItem("globalStorage",JSON.stringify(n)))},k=function(b){b.preventDefault();var c=b.target.childNodes;a.each(c,function(b){"INPUT"===c[b].nodeName&&(a.each(p,function(d){return p[d].value===c[b].value?void g(a(p[d]).parents("form")[0].parentNode,q[d]):void 0}),o.html("<p>The searched report "+c[b].value+" was not found</p>"))})},l=function(a){for(var b=a.target,c=b[b.selectedIndex],d=0;d<p.length;d++)p[d].value===c.value&&i(q[d],b.parentNode)};var r=function(){var b;if(b=localStorage.getItem("globalStorage"),!b)return!1;try{b=JSON.parse(b)}catch(c){return console.error("The saved data was not in a valid JSON format"),!1}a.each(b.reports,function(a,b){p[a].value=b.name,q[a].value=b.url}),a.each(b.folders,function(a,b){p[a+3].value=b.name,q[a+3].value=b.url})};!function(){var c=a(".links"),d=a(".buttons"),f=a(".search-box");a.each(c,function(b,c){a(c).click(e)}),a.each(d,function(b,c){a(c).click(e)}),a(f).submit(k),r(n),a(window).on("hashchange",b)}();var s=a(".tabs_list").eq(0);a(s).keydown(function(a){console.log(a.keyCode);var c=a.target;"LI"===c.tagName.toUpperCase()&&(13===a.keyCode||32===a.keyCode)&&(a.preventDefault(),console.log(c.tagName),b())})}(jQuery);
//# sourceMappingURL=main.min.js.map
/*! test 24-12-2014 */

function checkIcon(a){"use strict";var b=a.currentTarget.parentNode,c=a.target;console.log(b,c.className,c),a.preventDefault(),"settings"===c.parentNode.className&&settings(b),"expand"===c.parentNode.className&&expand(b),"cancel"===c.className&&settings(b.parentNode),"save"===c.className&&validation(b)}!function(a){"use strict";var b=a("#notifications");a.ajax({type:"GET",url:"../../data/notification.txt"}).done(function(a){console.log(a);var c="<p>"+a+"</p>";a.length?b.html(c):b.hide()}).fail(function(){b.hide()})}(jQuery);var funcRef,activeTab,checkIcon,settings,expand,validation,newIframe,addToSelect,searchBox,iframe,changeOption,links,names,url,buttons,sel,opt,iframe,search,tabs_list,addToStorage;names=$('input[name="Name"]'),url=$('input[name="url"]'),links=$(".links"),buttons=$(".buttons"),search=$(".search-box"),tabs_list=$(".tabs_list").eq(0),funcRef=function(){"use strict";var a=location.hash.slice(1),b=$(".tabs > div"),c=$(".tabs > ul > li > a").eq(0);""===a&&(a=c.href.split("#")[1],console.log(a)),$.each(b,function(b,c){c=$(c),c.addClass("hidden"),activeTab(a,b)});var d=$("#pre-fix-"+a);d.removeClass("hidden")},activeTab=function(a,b){"use strict";var c=$(".tabs > ul > li > a");c[b].parentNode.id="",c[b].href.split("#")[1]===a&&(c[b].parentNode.id="active")};var localStorageSupported=function(){"use strict";return Modernizr.localstorage?!0:(console.error("Your browser does not support localStorage"),!1)};settings=function(a){"use strict";var b="#"+a.id,c=$(b+"> form");$(c).toggleClass("hidden"),console.log(c)},expand=function(a){"use strict";iframe=document.getElementById("iframe-"+a.id),window.open(iframe.src,"_blank")},validation=function(a){"use strict";var b=-1,c=/http(s)?:\/\/w{0,3}.+\.\w{2,4}(.+)?/,d=0;$.each(names,function(e,f){f.parentNode.parentNode.parentNode.id===a.parentNode.id&&(""!==names[e].value&&""===url[e].value&&(url[e].style.border="1px solid red",d=1),""===names[e].value&&""!==url[e].value&&(names[e].style.border="1px solid red",d=1),""!==names[e].value&&""!==url[e].value&&(names[e].style.border="none","http"!==url[e].value.substring(0,4)&&(url[e].value="http://"+url[e].value),c.test(url[e].value)?(url[e].style.border="none",addToSelect(names[e],b,a.parentNode),b=e,addToStorage(names[e],url[e],a.parentNode,b)):(url[e].style.border="1px solid red",d=1)))}),b>-1&&0===d&&newIframe(url[b],a.parentNode)},newIframe=function(a,b){"use strict";var c=a.parentNode.parentNode;console.log(c.className),iframe=document.getElementById("iframe-"+b.id),null===iframe&&(iframe=document.createElement("iframe"),iframe.frameBorder=0,iframe.width="95%",iframe.height="100%",iframe.marginwidth="30%",iframe.id="iframe-"+b.id,$("#"+b.id).append(iframe)),iframe.setAttribute("src",a.value),$(c).addClass("hidden")},addToSelect=function(a,b,c){"use strict";sel=document.getElementById("reportsList"+c.id),null===sel&&(sel=document.createElement("select"),sel.id="reportsList"+c.id,$("#"+c.id).append(sel),$(sel).change(changeOption)),opt&&-1===b&&$.each(sel,function(){sel.remove(opt)}),opt=document.createElement("option"),opt.value=a.value,opt.innerHTML=a.value,opt.selected=!0,sel.add(opt,sel[0])};var local,globalStorage,storageReports=[],storageFolders=[];addToStorage=function(a,b,c,d){"use strict";console.log(storageReports,storageFolders,d),localStorageSupported()&&(storageReports=[],storageFolders=[],local={name:a.value,url:b.value},"pre-fix-quick-reports"===c.id&&storageReports.unshift(local),"pre-fix-my-team-folders"===c.id&&storageFolders.unshift(local),globalStorage={Reports:storageReports,Folders:storageFolders},localStorage.setItem("globalStorage",JSON.stringify(globalStorage)))},searchBox=function(a){"use strict";a.preventDefault();var b=a.target.childNodes;$.each(b,function(a){"INPUT"===b[a].nodeName&&($.each(names,function(c){return names[c].value===b[a].value?void expand(names[c].parentNode.parentNode.parentNode):void 0}),$("#notifications > p").innerHTML="The searched report "+b[a].value+" was not found")})},changeOption=function(a){"use strict";for(var b=a.target,c=b[b.selectedIndex],d=0;d<names.length;d++)names[d].value===c.value&&newIframe(url[d],b.parentNode)};var initReports=function(a){"use strict";var b;if(b=localStorage.getItem(a),console.log(b),!b)return!1;try{b=JSON.parse(b)}catch(c){return console.error("The saved data was not in a valid JSON format"),!1}};!function(){"use strict";$.each(links,function(a,b){$(b).click(checkIcon)}),$.each(buttons,function(a,b){$(b).click(checkIcon)}),$(search).submit(searchBox),initReports(storageFolders),initReports(storageReports)}(),$(tabs_list).keydown(function(a){"use strict";console.log(a.keyCode);var b=a.target;"LI"===b.tagName.toUpperCase()&&(13===a.keyCode||32===a.keyCode)&&(a.preventDefault(),console.log(b.tagName),funcRef())});
//# sourceMappingURL=main.min.js.map
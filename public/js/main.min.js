/*! test 28-12-2014 */

!function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=a("#notifications"),q=a('input[name="Name"]'),r=a('input[name="url"]'),s=[],t=[];a.ajax({type:"GET",url:"../../data/notification.txt"}).done(function(a){console.log(a);var b="<p>"+a+"</p>";a.length?p.html(b):p.hide()}).fail(function(){p.hide()}),b=function(){var b=location.hash.slice(1),d=a(".tabs > div"),e=a(".tabs > ul > li > a").eq(0),f=a("#pre-fix-"+b);""===b&&(b=e.href.split("#")[1]),a.each(d,function(d,e){e=a(e),e.addClass("hidden"),c(b,d)}),f.removeClass("hidden")},c=function(b,c){var d=a(".tabs > ul > li > a");d[c].parentNode.id="",d[c].href.split("#")[1]===b&&(d[c].parentNode.id="active")},d=function(){return Modernizr.localstorage?!0:(console.error("Your browser does not support localStorage"),!1)},e=function(a){var b,c,d=a.currentTarget.parentNode,e=a.target;console.log(d,e.className,e),a.preventDefault(),"settings"===e.parentNode.className&&(c=d,f(c)),"expand"===e.parentNode.className&&(c=d,g(c)),"cancel"===e.className&&(c=d.parentNode,f(c)),"save"===e.className&&(b=d,h(b))},f=function(b){var c="#"+b.id,d=a(c+"> form");a(d).toggleClass("hidden")},g=function(a,b){var c=document.getElementById("iframe-"+a.id);return c?void window.open(c.src,"_blank"):void window.open(b.value,"_blank")},h=function(b){var c=-1,d=/http(s)?:\/\/w{0,3}.+\.\w{2,4}(.+)?/,e=0;a.each(q,function(f,g){a(g).parents("form")[0]===b&&(""!==q[f].value&&""===r[f].value&&(r[f].style.border="1px solid red",e=1),""===q[f].value&&""!==r[f].value&&(q[f].style.border="1px solid red",e=1),""!==q[f].value&&""!==r[f].value&&(q[f].style.border="none","http"!==r[f].value.substring(0,4)&&(r[f].value="http://"+r[f].value),d.test(r[f].value)?(r[f].style.border="none",j(q[f],c,b.parentNode),c=f,m(q[f],r[f],b.parentNode)):(r[f].style.border="1px solid red",e=1)))}),c>-1&&0===e&&i(r[c],b.parentNode)},i=function(b,c){var d=a(b).parents("form")[0],e=document.getElementById("iframe-"+c.id);null===e&&(e=document.createElement("iframe"),e.frameBorder=0,e.width="95%",e.height="100%",e.marginwidth="30%",e.id="iframe-"+c.id,a("#"+c.id).append(e)),e.setAttribute("src",b.value),a(d).addClass("hidden")},j=function(b,c,d){var e,f=document.getElementById("reportsList"+d.id);null===f&&(f=document.createElement("select"),f.id="reportsList"+d.id,a("#"+d.id).append(f),a(f).change(l)),-1===c&&a.each(f,function(){f.remove(e)}),e=document.createElement("option"),e.value=b.value,e.innerHTML=b.value,e.selected=!0,f.add(e,f[0])},m=function(a,b,c){d()&&(n={name:a.value,url:b.value},"pre-fix-quick-reports"===c.id&&s.unshift(n),"pre-fix-my-team-folders"===c.id&&t.unshift(n),o={reports:s,folders:t},localStorage.setItem("globalStorage",JSON.stringify(o)))},k=function(b){b.preventDefault();var c=b.target.childNodes;a.each(c,function(b){"INPUT"===c[b].nodeName&&(a.each(q,function(d){return q[d].value===c[b].value?void g(a(q[d]).parents("form")[0].parentNode,r[d]):void 0}),a("#notifications").html("<p>The searched report "+c[b].value+" was not found</p>"))})},l=function(a){for(var b=a.target,c=b[b.selectedIndex],d=0;d<q.length;d++)q[d].value===c.value&&i(r[d],b.parentNode)};var u=function(){var b;if(b=localStorage.getItem("globalStorage"),!b)return!1;try{b=JSON.parse(b)}catch(c){return console.error("The saved data was not in a valid JSON format"),!1}a.each(b.reports,function(a,b){q[a].value=b.name,r[a].value=b.url}),a.each(b.folders,function(a,b){q[a+3].value=b.name,r[a+3].value=b.url})};!function(){var b=a(".links"),c=a(".buttons"),d=a(".search-box");a.each(b,function(b,c){a(c).click(e)}),a.each(c,function(b,c){a(c).click(e)}),a(d).submit(k),u(o)}();var v=a(".tabs_list").eq(0);a(v).keydown(function(a){console.log(a.keyCode);var c=a.target;"LI"===c.tagName.toUpperCase()&&(13===a.keyCode||32===a.keyCode)&&(a.preventDefault(),console.log(c.tagName),b())})}(jQuery);
//# sourceMappingURL=main.min.js.map